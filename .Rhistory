dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 12, 25)]
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
summary(dengue_features_test)
dengue_df
iquitos <- dengue_df[which(dengue_df$city == "0"),]
sj <- dengue_df[which(dengue_df$city == "1"),]
iquitos <- na.omit(iquitos)
sj <- na.omit(sj)
iquitos
sj
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
pred_iquitos <- pred_iquitos[,c(1:3, 12)]
pred_sj <- pred_sj[,c(1:3, 12)]
set.seed(1234)
inTrain <- createDataPartition(y = iquitos$total_cases, p = .80, list = FALSE)
training <- iquitos[inTrain,]
testing <- iquitos[-inTrain,]
fit <- train(total_cases ~ ., data = iquitos, method = "rf")
predicted_cases <- predict(fit, pred_iquitos)
pred_iquitos <- cbind(pred_iquitos, predicted_cases)
pred_iquitos$predicted_cases <- as.integer(pred_iquitos$predicted_cases)
set.seed(1234)
inTrain <- createDataPartition(y = sj$total_cases, p = .80, list = FALSE)
training <- sj[inTrain,]
testing <- sj[-inTrain,]
fit <- train(total_cases ~ ., data = sj, method = "lm")
predicted_cases <- predict(fit, pred_sj)
pred_sj <- cbind(pred_sj, predicted_cases)
pred_sj$predicted_cases <- as.integer(pred_sj$predicted_cases)
submission <- rbind(pred_sj, pred_iquitos)
submission <- submission[,c(1,2,3,6)]
submission$total_cases <- submission$predicted_cases
submission$predicted_cases <- NULL
submission[which(submission$city == "0"), "city"] <- "iq"
submission[which(submission$city == "1"), "city"] <- "sj"
submission[which(submission$total_cases < 0), "total_cases"] <- 0
submission$total_cases <- as.numeric(submission$total_cases)
str(submission)
write.csv(submission, file = "submission2.csv", row.names = F)
getwd()
View(submission)
submission <- submission[,c(1,2,3,6)]
View(submission)
submission <- submission[,c(1,2,3,5)]
submission$total_cases <- submission$predicted_cases
submission$predicted_cases <- NULL
submission[which(submission$city == "0"), "city"] <- "iq"
submission[which(submission$city == "1"), "city"] <- "sj"
submission[which(submission$total_cases < 0), "total_cases"] <- 0
submission$total_cases <- as.numeric(submission$total_cases)
str(submission)
write.csv(submission, file = "submission2.csv", row.names = F)
View(submission)
submission <- rbind(pred_sj, pred_iquitos)
submission <- submission[,c(1,2,3,5)]
submission$total_cases <- submission$predicted_cases
submission[which(submission$city == "0"), "city"] <- "iq"
submission[which(submission$city == "1"), "city"] <- "sj"
submission[which(submission$total_cases < 0), "total_cases"] <- 0
submission$total_cases <- as.numeric(submission$total_cases)
str(submission)
write.csv(submission, file = "submission2.csv", row.names = F)
getwd()
library(readr)
library(ggplot2)
library(caret)
library(party)
library(corrplot)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:4, 12, 25)]
dengue_df
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
summary(dengue_features_test)
library(corrplot)
dengue_df
iquitos <- dengue_df[which(dengue_df$city == "0"),]
sj <- dengue_df[which(dengue_df$city == "1"),]
iquitos <- na.omit(iquitos)
sj <- na.omit(sj)
iquitos
sj
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
pred_iquitos <- pred_iquitos[,c(1:4, 12)]
pred_sj <- pred_sj[,c(1:4, 12)]
set.seed(1234)
inTrain <- createDataPartition(y = iquitos$total_cases, p = .80, list = FALSE)
training <- iquitos[inTrain,]
testing <- iquitos[-inTrain,]
models <- c("svmLinear", "knn", "rf", "lm")
resum <- c()
fit <- train(total_cases ~ ., data = iquitos, method = "rf")
predicted_cases <- predict(fit, pred_iquitos)
pred_iquitos <- cbind(pred_iquitos, predicted_cases)
pred_iquitos$predicted_cases <- as.integer(pred_iquitos$predicted_cases)
set.seed(1234)
inTrain <- createDataPartition(y = sj$total_cases, p = .80, list = FALSE)
training <- sj[inTrain,]
testing <- sj[-inTrain,]
fit <- train(total_cases ~ ., data = sj, method = "lm")
predicted_cases <- predict(fit, pred_sj)
pred_sj <- cbind(pred_sj, predicted_cases)
pred_sj$predicted_cases <- as.integer(pred_sj$predicted_cases)
submission <- rbind(pred_sj, pred_iquitos)
submission <- submission[,c(1,2,3,6)]
submission$total_cases <- submission$predicted_cases
submission[which(submission$city == "0"), "city"] <- "iq"
submission[which(submission$city == "1"), "city"] <- "sj"
submission[which(submission$total_cases < 0), "total_cases"] <- 0
submission$total_cases <- as.numeric(submission$total_cases)
str(submission)
write.csv(submission, file = "submission2.csv", row.names = F)
getwd()
View(dengue_df)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
View(dengue_df)
dengue_df <- dengue_df[,c(1:3, 9, 17, 12, 25)]
View(dengue_df)
summary(dengue_df)
dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)]
which(dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)])
which[dengue_df$precipitation_amt_mm(is.na(dengue_df$precipitation_amt_mm))]
View(dengue_features_test)
dengue_df
dengue_df <- na.omit(dengue_df)
ggplot(dengue_df, aes(x = precipitation_amt_mm)) + geom_density() + facet_wrap(~ city)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 17, 12, 25)]
summary(dengue_df)
dengue_df
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df <- na.omit(dengue_df)
View(nainfo)
ggplot(dengue_df, aes(x = precipitation_amt_mm)) + geom_density() + facet_wrap(~ city)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
dengue_features_test$precipitation_amt_mm[is.na(dengue_features_test$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
summary(dengue_features_test)
summary(dengue_df)
dengue_df <- dengue_df[,c(1:3, 9, 12, 25)]
summary(dengue_df)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 12, 25)]
summary(dengue_df)
dengue_df
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df <- na.omit(dengue_df)
ggplot(dengue_df, aes(x = precipitation_amt_mm)) + geom_density() + facet_wrap(~ city)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
dengue_features_test$precipitation_amt_mm[is.na(dengue_features_test$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
summary(dengue_df)
library(readr)
library(ggplot2)
library(caret)
library(party)
library(corrplot)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 12, 25)]
summary(dengue_df)
dengue_df
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df <- na.omit(dengue_df)
ggplot(dengue_df, aes(x = precipitation_amt_mm)) + geom_density() + facet_wrap(~ city)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
dengue_features_test$precipitation_amt_mm[is.na(dengue_features_test$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
summary(dengue_df)
library(corrplot)
dengue_df
iquitos <- dengue_df[which(dengue_df$city == "0"),]
sj <- dengue_df[which(dengue_df$city == "1"),]
iquitos <- na.omit(iquitos)
sj <- na.omit(sj)
iquitos
sj
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
pred_iquitos <- pred_iquitos[,c(1:3, 9, 12)]
pred_sj <- pred_sj[,c(1:3, 9, 12)]
set.seed(1234)
inTrain <- createDataPartition(y = iquitos$total_cases, p = .80, list = FALSE)
training <- iquitos[inTrain,]
testing <- iquitos[-inTrain,]
models <- c("svmLinear", "knn", "rf", "lm")
resum <- c()
for (i in models) {
fit <- train(total_cases ~ ., data = training, method = i, na.action = na.pass)
predicted_cases <- predict(fit, testing)
hola <- postResample(pred = predicted_cases, obs = testing$total_cases)
resum <- cbind(hola, resum)
}
colnames(resum) <-(models)
View(resum)
dengue_predictions <- cbind(testing, predicted_cases)
ggplot(dengue_predictions, aes(x = total_cases, y = predicted_cases)) + geom_point()
fit <- train(total_cases ~ ., data = iquitos, method = "knn")
predicted_cases <- predict(fit, pred_iquitos)
pred_iquitos <- cbind(pred_iquitos, predicted_cases)
pred_iquitos$predicted_cases <- as.integer(pred_iquitos$predicted_cases)
set.seed(1234)
inTrain <- createDataPartition(y = sj$total_cases, p = .80, list = FALSE)
training <- sj[inTrain,]
testing <- sj[-inTrain,]
models <- c("svmLinear", "knn", "rf", "lm")
resum <- c()
for (i in models) {
fit <- train(total_cases ~ ., data = training, method = i, na.action = na.pass)
predicted_cases <- predict(fit, testing)
hola <- postResample(pred = predicted_cases, obs = testing$total_cases)
resum <- cbind(hola, resum)
}
colnames(resum) <-(models)
View(resum)
fit <- train(total_cases ~ ., data = sj, method = "knn")
predicted_cases <- predict(fit, pred_sj)
pred_sj <- cbind(pred_sj, predicted_cases)
pred_sj$predicted_cases <- as.integer(pred_sj$predicted_cases)
submission <- rbind(pred_sj, pred_iquitos)
submission <- submission[,c(1,2,3,5)]
submission$total_cases <- submission$predicted_cases
submission[which(submission$city == "0"), "city"] <- "iq"
View(submission)
submission <- rbind(pred_sj, pred_iquitos)
View(submission)
submission <- submission[,c(1,2,3,6)]
submission$total_cases <- submission$predicted_cases
submission[which(submission$city == "0"), "city"] <- "iq"
submission[which(submission$city == "1"), "city"] <- "sj"
submission[which(submission$total_cases < 0), "total_cases"] <- 0
submission$total_cases <- as.numeric(submission$total_cases)
str(submission)
write.csv(submission, file = "submission3.csv", row.names = F)
getwd()
submission$predicted_cases <- NULL
write.csv(submission, file = "submission3.csv", row.names = F)
getwd()
library(readr)
library(ggplot2)
library(caret)
library(party)
library(corrplot)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
View(dengue_df)
dengue_df <- dengue_df[,c(1:3, 9, 12, 14, 23, 25)]
summary(dengue_df)
View(dengue_df)
dengue_features_test$reanalysis_min_air_temp_k[is.na(dengue_features_test$reanalysis_min_air_temp_k)] <-
(dengue_df$station_min_temp_c +273))
dengue_features_test$reanalysis_min_air_temp_k[is.na(dengue_features_test$reanalysis_min_air_temp_k)] <-
(dengue_df$station_min_temp_c +273))
dengue_df$station_min_temp_c +273
View(dengue_features_test)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 12, 14, 23, 25)]
summary(dengue_df)
dengue_features_test <- dengue_features_test[,c(1:3, 9, 12, 14, 23, 25)]
dengue_features_test <- dengue_features_test[,c(1:3, 9, 12, 14, 23)]
View(dengue_features_test)
View(dengue_df)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
View(dengue_df)
library(readr)
library(ggplot2)
library(caret)
library(party)
library(corrplot)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 12, 25)]
dengue_features_test <- dengue_features_test[,c(1:3, 9, 12)]
summary(dengue_df)
View(dengue_df)
dengue_df[dengue_df$total_cases,]
dengue_df$total_cases,
dengue_df$total_cases
dengue_df$total_cases[2:nrow(dengue_df),]
dengue_df$total_cases[2:nrow(dengue_df)]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(2:nrow(dengue_df), 1)]
View(dengue_df)
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(nrow(dengue_df), 1:nrow(dengue_df))]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(nrow(dengue_df), 1:(nrow(dengue_df)-1)]
dengue_df$total_cases[c(nrow(dengue_df), 1:(nrow(dengue_df)-1)]
dengue_df$total_cases_week_before <-
dengue_df$total_cases[c(nrow(dengue_df), 1:(nrow(dengue_df)-1)]
dengue_df$total_cases_week_before <-
dengue_df$total_cases[c(nrow(dengue_df), 1:(nrow(dengue_df)-1)]
dengue_df$total_cases[c(nrow(dengue_df), 1:(nrow(dengue_df)-1)]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(0, 1:(nrow(dengue_df))]
dengue_df$total_cases[c(0, 1:(nrow(dengue_df))]
dengue_df$total_cases(c(0, 1:(nrow(dengue_df)))
dengue_df$total_cases(c(0, 1:(nrow(dengue_df)))
dengue_df$total_cases_week_before <- dengue_df$total_cases[c("0",1:(nrow(dengue_df)-1)]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c("0",1:(nrow(dengue_df)-1)]
1:(nrow(dengue_df)-1)
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(1:(nrow(dengue_df)-1)]
dengue_df$total_cases_week_before <- dengue_df$total_cases[(1:(nrow(dengue_df))]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(1456, 1:1455)]
View(dengue_df)
dengue_df
library(corrplot)
dengue_df
iquitos <- dengue_df[which(dengue_df$city == "0"),]
sj <- dengue_df[which(dengue_df$city == "1"),]
iquitos <- na.omit(iquitos)
sj <- na.omit(sj)
iquitos$week_start_date <- NULL
sj$week_start_date <- NULL
str(iquitos)
iquitos_correlation_matrix <- cor(iquitos)
corrplot(iquitos_correlation_matrix, tl.cex = 0.5, tl.srt = 45)
sj_correlation_matrix <- cor(sj)
corrplot(sj_correlation_matrix, tl.cex = 0.5, tl.srt = 45)
dengue_labels_train <- read_csv("datasets/dengue_labels_train.csv")
dengue_features_train <- read_csv("datasets/dengue_features_train.csv")
dengue_features_test <- read_csv("datasets/dengue_features_test.csv")
dengue_df <- merge(dengue_features_train, dengue_labels_train)
dengue_df[which(dengue_df$city == "iq"), "city"] <- "0"
dengue_df[which(dengue_df$city == "sj"), "city"] <- "1"
dengue_df$city <- as.numeric(dengue_df$city)
dengue_features_test[which(dengue_features_test$city == "iq"), "city"] <- "0"
dengue_features_test[which(dengue_features_test$city == "sj"), "city"] <- "1"
dengue_features_test$city <- as.numeric(dengue_features_test$city)
dengue_df <- dengue_df[,c(1:3, 9, 12, 25)]
dengue_features_test <- dengue_features_test[,c(1:3, 9, 12)]
dengue_df$total_cases_week_before <- dengue_df$total_cases[c(1456, 1:1455)]
naintrain <- colSums(is.na(dengue_df))
naintest <- colSums(is.na(dengue_features_test))
nainfo <- cbind(naintrain, naintest)
dengue_df <- na.omit(dengue_df)
ggplot(dengue_df, aes(x = precipitation_amt_mm)) + geom_density() + facet_wrap(~ city)
dengue_df$reanalysis_dew_point_temp_k[is.na(dengue_df$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_features_test$reanalysis_dew_point_temp_k[is.na(dengue_features_test$reanalysis_dew_point_temp_k)] <-
mean(na.omit(dengue_df$reanalysis_dew_point_temp_k))
dengue_df$precipitation_amt_mm[is.na(dengue_df$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
dengue_features_test$reanalysis_min_air_temp_k[is.na(dengue_features_test$reanalysis_min_air_temp_k)] <-
(dengue_df$station_min_temp_c +273))
dengue_features_test$reanalysis_min_air_temp_k[is.na(dengue_features_test$precipitation_amt_mm)] <-
mean(na.omit(dengue_df$precipitation_amt_mm))
summary(dengue_df)
dengue_df
iquitos <- dengue_df[which(dengue_df$city == "0"),]
sj <- dengue_df[which(dengue_df$city == "1"),]
iquitos <- na.omit(iquitos)
sj <- na.omit(sj)
iquitos
sj
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
pred_iquitos <- pred_iquitos[,c(1:3, 9, 12)]
pred_sj <- pred_sj[,c(1:3, 9, 12)]
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
View(pred_iquitos)
pred_iquitos <- pred_iquitos[,c(1:3, 9, 12)]
pred_sj <- pred_sj[,c(1:3, 9, 12)]
pred_iquitos <- dengue_features_test[which(dengue_features_test$city == "0"),]
pred_sj <- dengue_features_test[which(dengue_features_test$city == "1"),]
library(caret)
library(ggplot2)
set.seed(1234)
inTrain <- createDataPartition(y = iquitos$total_cases, p = .80, list = FALSE)
training <- iquitos[inTrain,]
testing <- iquitos[-inTrain,]
models <- c("svmLinear", "knn", "rf", "lm")
resum <- c()
for (i in models) {
fit <- train(total_cases ~ ., data = training, method = i, na.action = na.pass)
predicted_cases <- predict(fit, testing)
hola <- postResample(pred = predicted_cases, obs = testing$total_cases)
resum <- cbind(hola, resum)
}
colnames(resum) <-(models)
dengue_predictions <- cbind(testing, predicted_cases)
ggplot(dengue_predictions, aes(x = total_cases, y = predicted_cases)) + geom_point()
